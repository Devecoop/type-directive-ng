<div class="ly-type ly-type-{{type.id}}">


  <!-- ---------------- -->
  <!--  Type message  -->
  <!-- ---------------- -->

  <div class="ly-message ly-generic-message ly-animation-fast" ng-if="view.path=='/message'">
    <p class="ly-description">{{message.title}}</p>
    <p class="ly-description-sub">{{message.description}}</p>
  </div>


  <!-- ----------------- -->
  <!--  Loading message  -->
  <!-- ----------------- -->

  <div class="ly-message ly-loading" ng-if="view.path=='/loading'">
    <p class="ly-description">Loading Type</p>
    <div class="ly-spinner">
      <div class="ly-bounce-1"></div>
      <div class="ly-bounce-2"></div>
      <div class="ly-bounce-3"></div>
    </div>
  </div>


  <!-- ------------ -->
  <!-- Type Content -->
  <!-- ------------ -->

  <div class="ly-content" ng-class="{'ly-animation': view.path=='/default'}" ng-if="view.path!='/loading' && view.path!='/message'">


    <!-- ------------- -->
    <!--  Type header  -->
    <!-- ------------- -->

    <div class="ly-header">

      <!-- Name -->

      <p class="ly-name ly-type-name">{{type.name}}</p>

      <!-- Side menu -->

      <div class="ly-menu">
        <a href="#"><i class="fa fa-ellipsis-v"></i></a>
      </div>
    </div>


    <!-- ---------------- -->
    <!--  Type subheader  -->
    <!-- ---------------- -->

    <div class="ly-subheader">

      <!-- Connection name -->

      <div class="ly-connection ly-properties" ng-if="connection=='properties'">
        <span class="ly-name">Properties</span>
        <span class="ly-label">{{type.properties.length}}</span>
        <ul class="ly-add" ng-click="addProperty()">
          <li><a href="">Add</a></li>
        </ul>
      </div>

      <div class="ly-connection ly-functions" ng-if="connection=='functions'">
        <span class="ly-name">Functions</span>
        <span class="ly-label">{{type.functions.length}}</span>
      </div>

      <div class="ly-connection ly-statuses" ng-if="connection=='statuses'">
        <span class="ly-name">Statuses</span>
        <span class="ly-label">{{type.statuses.length}}</span>
      </div>

      <div class="ly-connection ly-category" ng-if="connection=='category'">
        <span class="ly-name">Category</span>
      </div>

      <!-- Side menu -->

      <div class="ly-menu" ng-click="view.path='/connections'">
        <a href="#"><i class="fa fa-angle-down"></i></a>
      </div>
    </div>


    <!-- ------------ -->
    <!--  Properties  -->
    <!-- ------------ -->

    <div class="ly-properties" ng-show="connection=='properties'">
      <div class="ly-property" ng-repeat="property in type.properties">

        <!-- Property form -->

        <form class="ly-form" name="form" ng-submit="updateProperty(property, form)" novalidate>
          <div class="ly-fields" ng-class="{'ly-owner': isOwner(), 'ly-open-connection': property.open}">
            <a href="" ng-click="updateProperty(property, form)" class="ly-save" ng-class="{'ly-save-enabled': form.$dirty && form.$valid}">
              <span>{{property.status || 'Save'}}</span> <i class="fa fa-check-circle" ></i>
            </a>

            <a href="" ng-click="confirmDeleteProperty('property', property, $index)" class="ly-delete">
              <i class="fa fa-minus-circle" ></i>
            </a>

            <div class="ly-field ly-field-top" ng-click="toggle(property)">
              <i class="fa fa-angle-right" ng-if="!property.open"></i>
              <i class="fa fa-angle-down" ng-if="property.open"></i>
              <input class="ly-value ly-name-field" type="text" disabled ng-model="property.name"></input>
            </div>

            <div class="ly-detail" ng-show="property.open">

              <div class="ly-field ly-editable">
                <p class="ly-description" ng-class="{'ly-error': form.name.$error.required}">Name</p>
                <input class="ly-value" type="text" ng-disabled="!isOwner()" name="name" ng-model="property.name" required></input>
              </div>
              <div class="ly-field">
                <p class="ly-description">ID</p>
                <input class="ly-value ly-id-field" type="text" disabled ng-model="property.id"></input>
              </div>
              <div class="ly-field ly-editable">
                <p class="ly-description">Type</p>
                <select class="ly-value"
                  ng-model="property.type"
                  ng-options="key as value for (key , value) in config.property.types">
                </select>
              </div>

              <!-- Text case -->

              <div class="ly-field ly-editable" ng-if="property.type=='text'">
                <p class="ly-description">Accepted values (key - value)</p>
                <div ng-repeat="pair in property.accepted">
                  <div class="ly-accepted">
                    <a href="" ng-click="removeAccepted(property, $index, form)"><i class="fa fa-minus"></i></a>
                    <input class="ly-value ly-accepted-field" placeholder="key" type="text" ng-disabled="!isOwner()" ng-model="pair.key"></input>
                    <input class="ly-value ly-accepted-field" placeholder="value" type="text" ng-disabled="!isOwner()" ng-model="pair.value"></input>
                  </div>
                </div>
                <div class="ly-accepted ly-accepted-add">
                  <a href="" ng-click="addAccepted(property)"><i class="fa fa-plus"></i><span>Add</span></a>
                </div>
              </div>

              <!-- Range case -->

              <div class="ly-field ly-editable" ng-if="property.type=='range'">
                  <p class="ly-description">From value</p>
                  <input class="ly-value ly-range-field" placeholder="min" type="text" ng-disabled="!isOwner()" ng-model="property.range.min"></input>
              </div>
              <div class="ly-field ly-editable" ng-if="property.type=='range'">
                <p class="ly-description">To value</p>
                <input class="ly-value ly-range-field" placeholder="max" type="text" ng-disabled="!isOwner()" ng-model="property.range.max"></input>
              </div>
              <div class="ly-field ly-editable" ng-if="property.type=='range'">
                <p class="ly-description">With interval</p>
                <input class="ly-value ly-range-field" placeholder="interval" type="text" ng-disabled="!isOwner()" ng-model="property.range.step"></input>
              </div>

              <!-- Other cases -->

              <div class="ly-field ly-editable" ng-if="property.type!='text' && property.type!='range'">
                <p class="ly-description">Accepted values</p>
                <input class="ly-value ly-default-field" type="text" disabled value="Any {{property.type}} value"></input>
              </div>

              <div class="ly-field ly-editable">
                <p class="ly-description">Default value</p>
                <input class="ly-value ly-default-field" type="text" ng-disabled="!isOwner()" ng-model="property.default"></input>
                </p>
              </div>
            </div>
          </div>
        </form>
      </div>
    </div>


    <!-- ----------------- -->
    <!-- Connection Delete -->
    <!-- ----------------- -->

    <div class="ly-settings ly-delete ly-modal ly-animation-fast" ng-if="view.path=='/delete'">
    <!--<div class="ly-settings ly-delete ly-modal ly-animation-fast">-->
      <div class="ly-modal-backdrop" ng-click="showDefault()"></div>
      <div class="ly-modal-window">
        <a class="ly-close" href="" ng-click="showDefault()">×</a>
        <div class="ly-connection-delete">
          <div class="ly-header">
            <p class="ly-name">Delete</p>
          </div>
          <form class="ly-form" ng-submit="deleteProperty(confirm)">
            <div ng-class="{'ly-owner': isOwner()}">
              <div>
                <p class="ly-info">
                Deleting your {{toDelete.type}} is irreversible.
                Enter the {{toDelete.type}} name to confirm you want to permanently delete.
                </p>
              </div>

              <div class="ly-field ly-editable">
                <input class="ly-value ly-name" type="text" autofocus placeholder="Property name" ng-model="confirm"></input>
              </div>
              <div class="ly-actions">
                <button class="ly-button ly-delete-button" ng-class="{'ly-disabled-button': confirm!=toDelete.connection.name}">delete</button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>


    <div class="ly-connections ly-modal ly-animation-fast" ng-if="view.path=='/connections'">
      <div class="ly-modal-backdrop" ng-click="showDefault()"></div>
      <div class="ly-modal-window">
        <a class="ly-close" href="" ng-click="showDefault()">×</a>

        <div class="ly-connections-type">
          <div class="ly-header">
            <p class="ly-name">Connections</p>
          </div>
          <div class="ly-list">
            <div class="ly-connection ly-properties" ng-click="setConnection('properties')">
              <i class="fa fa-angle-right"></i>
              <span class="ly-name">Properties</span>
              <span class="ly-label">{{type.properties.length}}</span>
            </div>
            <div class="ly-connection ly-functions" ng-click="setConnection('functions')">
              <i class="fa fa-angle-right"></i>
              <span class="ly-name">Functions</span>
              <span class="ly-label">{{type.functions.length}}</span>
            </div>
            <div class="ly-connection ly-statuses" ng-click="setConnection('statuses')">
              <i class="fa fa-angle-right"></i>
              <span class="ly-name">Statuses</span>
              <span class="ly-label">{{type.statuses.length}}</span>
            </div>
            <div class="ly-connection ly-category" ng-click="setConnection('category')">
              <i class="fa fa-angle-right"></i>
              <span class="ly-name">Category</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
